{% extends 'admin/layout.html.twig' %}

{% block title %}Back-office : Boutique{% endblock %}

{% block body %}
    <div class="card border-0 rounded-0 my-3 py-3 px-4 bg-greenlight">
        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
            <ol class="breadcrumb p-0 m-0">
                <li class="breadcrumb-item"><a href="{{ path('admin_dashboard') }}">Admin</a></li>
                <li class="breadcrumb-item active" aria-current="page">Gestion de la Boutique</li>
            </ol>
        </nav>
    </div>
    <div class="card my-3 p-5 rounded-0">
        <h1 class="text-title text-center">Gestion de la Boutique</h1>
    </div>


    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="flash-{{ label }}">
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}

    {# liste des produits #}
    <div class="card my-3 rounded-0 p-0">
        <div class="bg-dark card-header">
            <h2 class="card-title text-white">Produit en stock</h2>
        </div>
        <div class="card-body p-0">
            {% if not produits %}
                <p class="text-card text-center m-5">Il n'y a pas de produit en stock.</p>
            {% else %}
                <table class="table table-striped table-hover my-2">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Nom</th>
                        <th>Prix</th>
                        <th>Quantité</th>
                        <th>Catégorie</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for produit in produits %}
                        <tr>
                            <td>{{ produit.id }}</td>
                            <td>{{ produit.name }}</td>
                            <td>{{ produit.price }}</td>
                            <td>{{ produit.quantity }}</td>
                            <td>{{ produit.categorie.name }}</td>
                            <td><a href="{{ path('admin_produit_edit', {'id' : produit.id }) }}"><i
                                            class="fas fa-pen"></i></a></td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        </div>

    </div>

    <div class="row row-cols-1 row-cols-md-2">
        <div class="col my-3">
            {# formulaire d'ajout produit #}
            <div class="card rounded-0 h-100">
                <div class="card-header">
                    <h2>Ajouter un produit</h2>
                </div>
                <div class="card-body p-0">
                    {{ form_start(formProduit) }}
                    {{ form_end(formProduit) }}
                </div>
            </div>
        </div>
        <div class="col my-3">
            {# historique de commandes #}
            <div class="card rounded-0 h-100">
                <div class="card-header">
                    <h2>Historique des commandes</h2>
                </div>
                <div class="card-body">
                    List des commandes
                </div>
            </div>
        </div>
    </div>


    <div class="row row-cols-1 row-cols-md-2 my-3">
        {# liste des catéories #}
        <div class="col">
            <div class="card rounded-0 h-100">
                <div class="card-header">
                    <h2>Liste des catégories</h2>
                </div>
                <div class="card-body p-3">
                    {% if not categories %}
                        <p class="text-center">Il n'ya pas de catégorie référencé.</p>
                    {% else %}

                        <div class="row row-cols-2 row-cols-md-3">
                            {% for categorie in categories %}
                                <div class="col">
                                    <div class="card h-100">
                                        <img src="{{ asset('uploads/images/categorie/' ~ categorie.photo) }}"
                                             class="card-img-top" alt="{{ categorie.name }}">
                                        <div class="card-body">
                                            <h5>
                                                <a href="{{ path('admin_categorie_edit', {'id' : categorie.id }) }}"><i
                                                            class="fas fa-pen"></i></a>
                                                {# <a href="{{ path('admin_produit_edit', {'id' : categorie.id }) }}"><i class="fas fa-trash"></i></a> #}
                                                {{ categorie.name }}
                                            </h5>

                                        </div>
                                    </div>
                                </div>
                            {% endfor %}

                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {# formualire d'ajout de catégorie #}
        <div class="col">
            <div class="card rounded-0 h-100">
                <div class="card-header">
                    <h2>Ajouter une catégorie</h2>
                </div>
                <div class="card-body p-0">
                    {{ form_start(formCategorie) }}
                    {{ form_end(formCategorie) }}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
